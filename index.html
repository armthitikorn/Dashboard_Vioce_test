<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <title>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background-color: #f9fbff; }
    h1 { text-align: center; }
    .section-title { font-size: 18px; margin-top: 30px; font-weight: bold; color: #333; }
    .question { margin-bottom: 25px; padding: 15px; background-color: #fff; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    button { margin: 5px; padding: 6px 12px; }
    a.download-link { display: block; margin-top: 8px; color: #0066cc; text-decoration: none; }
    a.download-link:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div>
    ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö: <input id="username" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" type="text"/>
  </div>
  <h1>üé§ ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</h1>

  <!-- üîπ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 20 ‡∏Ç‡πâ‡∏≠ -->
  <div class="section-title">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (‡∏ï‡πâ‡∏ô‡∏™‡∏≤‡∏¢)</div>
  <div class="question"><label>1. ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</label><br/>
    <button onclick="startRecording(1)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(1)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink1" class="download-link" style="display:none;">üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</a>
  </div>
  <div class="question"><label>2. ‡∏Ç‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏¥‡∏î‡∏î‡∏π‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö</label><br/>
    <button onclick="startRecording(2)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(2)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink2" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>3. ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏°‡∏±‡∏ô‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ</label><br/>
    <button onclick="startRecording(3)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(3)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink3" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>4. ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</label><br/>
    <button onclick="startRecording(4)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(4)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink4" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>5. ‡∏Ç‡∏≠‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡∏Å‡πà‡∏≠‡∏ô</label><br/>
    <button onclick="startRecording(5)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(5)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink5" class="download-link" style="display:none;"></a>
  </div>

  <div class="section-title">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≤‡∏¢)</div>
  <div class="question"><label>6. ‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ñ‡∏∂‡∏á‡∏™‡∏π‡∏á‡∏à‡∏±‡∏á</label><br/>
    <button onclick="startRecording(6)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(6)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink6" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>7. ‡∏â‡∏±‡∏ô‡∏Å‡∏•‡∏±‡∏ß‡∏ß‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</label><br/>
    <button onclick="startRecording(7)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(7)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink7" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>8. ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏Ñ‡∏∏‡πâ‡∏°</label><br/>
    <button onclick="startRecording(8)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(8)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink8" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>9. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢</label><br/>
    <button onclick="startRecording(9)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(9)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink9" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>10. ‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß</label><br/>
    <button onclick="startRecording(10)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(10)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink10" class="download-link" style="display:none;"></a>
  </div>

  <div class="section-title">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ (‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏≤‡∏¢)</div>
  <div class="question"><label>11. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÉ‡∏Ñ‡∏£</label><br/>
    <button onclick="startRecording(11)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(11)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink11" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>12. ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á</label><br/>
    <button onclick="startRecording(12)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(12)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink12" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>13. ‡∏ñ‡πâ‡∏≤‡∏â‡∏±‡∏ô‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏´‡∏ß‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô</label><br/>
    <button onclick="startRecording(13)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(13)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink13" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>14. ‡∏ñ‡πâ‡∏≤‡∏â‡∏±‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÄ‡∏£‡πá‡∏ß ‡πÉ‡∏Ñ‡∏£‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå</label><br/>
    <button onclick="startRecording(14)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(14)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink14" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>15. ‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</label><br/>
    <button onclick="startRecording(15)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(15)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink15" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>16. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏à‡∏∞‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</label><br/>
    <button onclick="startRecording(16)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(16)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink16" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>17. ‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà</label><br/>
    <button onclick="startRecording(17)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(17)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink17" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>18. ‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏´‡∏°</label><br/>
    <button onclick="startRecording(18)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(18)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink18" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>19. ‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏•‡∏¢</label><br/>
    <button onclick="startRecording(19)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(19)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink19" class="download-link" style="display:none;"></a>
  </div>
  <div class="question"><label>20. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</label><br/>
    <button onclick="startRecording(20)">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <button onclick="stopRecording(20)">‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
    <a id="downloadLink20" class="download-link" style="display:none;"></a>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏ß‡∏° -->
  <button id="downloadAllBtn">üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (ZIP)</button>
  <hr>
  <h2>üìÇ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î</h2>
  <ul id="fileList"></ul>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getStorage, ref, uploadBytes, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-storage.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA4OrZERUoxWPiShCEWVvz1MK9cYGO3_K8",
      authDomain: "new-record-3ccd6.firebaseapp.com",
      projectId: "new-record-3ccd6",
      storageBucket: "new-record-3ccd6.appspot.com",
      messagingSenderId: "1065863160189",
      appId: "1:1065863160189:web:25313e55b0733f5e126c14",
      measurementId: "G-JW6N2HYR58"
    };
    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);
    const db = getFirestore(app);

    let recorders = [], audioChunksList = [];
    const fileListElement = document.getElementById('fileList');

    window.startRecording = async function(index) {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        const recorder = new MediaRecorder(stream);
        const audioChunks = [];
        recorder.ondataavailable = e => audioChunks.push(e.data);
        recorder.start();
        recorders[index] = recorder;
        audioChunksList[index] = audioChunks;
      } catch (error) { alert("‚ö†Ô∏è ‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô"); }
    };

    window.stopRecording = function(index) {
      const recorder = recorders[index], audioChunks = audioChunksList[index];
      if (!recorder) return;
      recorder.stop();
      recorder.onstop = async () => {
        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
        const username = document.getElementById("username").value || "anonymous";
        const audioFileName = `${username}_answer_${index}.webm`;
        const storageRef = ref(storage, 'answers/' + audioFileName);

        try {
          await uploadBytes(storageRef, audioBlob);
          await addDoc(collection(db, "recordings"), {
            fileName: audioFileName,
            username: username,
            questionIndex: index,
            timestamp: new Date().toISOString()
          });

          const audioUrl = URL.createObjectURL(audioBlob);
          const downloadLink = document.getElementById('downloadLink' + index);
          downloadLink.href = audioUrl;
          downloadLink.download = audioFileName;
          downloadLink.textContent = 'üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà ' + index;
          downloadLink.style.display = 'block';
          fetchAndDisplayFiles();
        } catch (e) { alert("‚ùå ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + e.message); }
      };
    };

    async function fetchAndDisplayFiles() {
      fileListElement.innerHTML = '';
      try {
        const listRef = ref(storage, 'answers/');
        const res = await listAll(listRef);
        if (res.items.length === 0) {
          fileListElement.innerHTML = '<li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î</li>'; return;
        }
        for (const itemRef of res.items) {
          const url = await getDownloadURL(itemRef);
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = url; a.textContent = itemRef.name; a.target = "_blank";
          li.appendChild(a); fileListElement.appendChild(li);
        }
      } catch (e) { console.error("‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", e); }
    }
    fetchAndDisplayFiles();

    document.getElementById("downloadAllBtn").onclick = async () => {
      const zip = new JSZip();
      const username = document.getElementById("username").value || "anonymous";
      try {
        const listRef = ref(storage, 'answers/');
        const res = await listAll(listRef);
        for (const itemRef of res.items) {
          const url = await getDownloadURL(itemRef);
          const response = await fetch(url);
          const blob = await response.blob();
          zip.file(itemRef.name, blob);
        }
        const content = await zip.generateAsync({ type: "blob" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(content);
        a.download = username + "_voice_answers.zip";
        a.click();
      } catch (e) { alert("‚ùå ZIP ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: " + e.message); }
    };
  </script>
</body>
</html>





