<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<title>р╣Бр╕Ър╕Ър╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕Вр╕▓р╕вр╕Ыр╕гр╕░р╕Бр╕▒р╕Щ</title>
<style>
┬а ┬а ┬а ┬а body { font-family: sans-serif; padding: 20px; background-color: #f0f8ff; }
┬а ┬а ┬а ┬а h1 { text-align: center; }
┬а ┬а ┬а ┬а .section-title { font-size: 18px; margin-top: 30px; color: #333; }
┬а ┬а ┬а ┬а .question { margin-bottom: 25px; padding: 15px; background-color: #fff; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
┬а ┬а ┬а ┬а button { margin-right: 10px; padding: 8px 12px; }
┬а ┬а ┬а ┬а a { display: block; margin-top: 10px; }
┬а ┬а </style>
</head>
<body>
<div>р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╕Чр╕│р╣Бр╕Ър╕Ър╕Чр╕Фр╕кр╕нр╕Ъ: <input id="username" placeholder="р╕Бр╕гр╕нр╕Бр╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Др╕╕р╕У" type="text"/></div>
<h1>р╣Бр╕Ър╕Ър╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕╡р╕вр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕Вр╕▓р╕вр╕Ыр╕гр╕░р╕Бр╕▒р╕Щ</h1>
<div class="section-title">р╕Др╕│р╕Цр╕▓р╕бр╕Бр╣Ир╕нр╕Щр╕Ыр╕┤р╕Фр╕Бр╕▓р╕гр╕Вр╕▓р╕в (р╕Хр╣Йр╕Щр╕кр╕▓р╕в)</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 1: р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Др╕гр╕▒р╕Ъ р╣Бр╕Хр╣Ир╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕вр╕▒р╕Зр╣Др╕бр╣Ир╕кр╕Щр╣Гр╕Ир╕Ыр╕гр╕░р╕Бр╕▒р╕Щ</label><br/>
<button onclick="startRecording(1)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(1)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink1" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 2: р╕Вр╕нр╣Ар╕зр╕ер╕▓р╕Др╕┤р╕Фр╕Фр╕╣р╕Бр╣Ир╕нр╕Щр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(2)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(2)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink2" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 3: р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Бр╕Щр╣Ир╣Гр╕Ир╕зр╣Ир╕▓р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕Щр╕╡р╣Йр╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ър╕Ьр╕бр╕лр╕гр╕╖р╕нр╣Ар╕Ыр╕ер╣Ир╕▓</label><br/>
<button onclick="startRecording(3)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(3)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink3" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 4: р╕Вр╕нр╕Ыр╕гр╕╢р╕Бр╕йр╕▓р╕Др╕гр╕нр╕Ър╕Др╕гр╕▒р╕зр╕Бр╣Ир╕нр╕Щр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(4)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(4)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink4" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 5: р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕бр╕╡р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕зр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(5)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(5)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink5" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 6: р╕Вр╕нр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕бр╕Бр╣Ир╕нр╕Щр╕Хр╕▒р╕Фр╕кр╕┤р╕Щр╣Гр╕Ир╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(6)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(6)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink6" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 7: р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕кр╕░р╕Фр╕зр╕Бр╕Др╕╕р╕вр╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(7)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(7)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink7" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 8: р╕Вр╕нр╣Ар╕Ыр╕гр╕╡р╕вр╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╕Бр╕▒р╕Ър╕Ър╕гр╕┤р╕йр╕▒р╕Чр╕нр╕╖р╣Ир╕Щр╕Бр╣Ир╕нр╕Щр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(8)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(8)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink8" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 9: р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(9)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(9)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink9" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 10: р╕Вр╕нр╣Гр╕лр╣Йр╕кр╣Ир╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Чр╕▓р╕Зр╕нр╕╡р╣Ар╕бр╕ер╕Бр╣Ир╕нр╕Щр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(10)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(10)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink10" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="section-title">р╕Др╕│р╕Цр╕▓р╕бр╕лр╕ер╕▒р╕Зр╕Ыр╕┤р╕Фр╕Бр╕▓р╕гр╕Вр╕▓р╕в</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 11: р╕Вр╕нр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Гр╕Ир╣Др╕бр╣Ир╕Чр╕│р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╣Бр╕ер╣Йр╕зр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(11)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(11)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink11" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 12: р╕гр╕╣р╣Йр╕кр╕╢р╕Бр╕зр╣Ир╕▓р╕Др╣Ир╕▓р╣Ар╕Ър╕╡р╣Йр╕вр╣Бр╕Юр╕Зр╣Ар╕Бр╕┤р╕Щр╣Др╕Ыр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(12)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(12)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink12" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 13: р╕Юр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╕Чр╕╡р╣Ир╕Хр╕Бр╕ер╕Зр╣Др╕зр╣Й</label><br/>
<button onclick="startRecording(13)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(13)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink13" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 14: р╕Вр╕нр╕Др╕╖р╕Щр╣Ар╕Зр╕┤р╕Щр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(14)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(14)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink14" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 15: р╣Др╕бр╣Ир╕кр╕░р╕Фр╕зр╕Бр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щр╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(15)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(15)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink15" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 16: р╕Вр╕нр╣Ар╕ер╕╖р╣Ир╕нр╕Щр╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Бр╕гр╕бр╕Шр╕гр╕гр╕бр╣Мр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(16)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(16)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink16" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 17: р╕бр╕╡р╕Вр╣Йр╕нр╕кр╕Зр╕кр╕▒р╕вр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Бр╕▒р╕Ър╕Др╕зр╕▓р╕бр╕Др╕╕р╣Йр╕бр╕Др╕гр╕нр╕Зр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(17)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(17)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink17" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 18: р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕вр╕Бр╣Ар╕ер╕┤р╕Бр╕Бр╕гр╕бр╕Шр╕гр╕гр╕бр╣Мр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(18)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(18)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink18" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 19: р╕Юр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕нр╕╖р╣Ир╕Щр╕Чр╕╡р╣Ир╕Др╕╕р╣Йр╕бр╕Др╣Ир╕▓р╕Бр╕зр╣Ир╕▓</label><br/>
<button onclick="startRecording(19)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(19)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink19" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>
<div class="question">
<label>р╕Др╕│р╕Цр╕▓р╕бр╕Чр╕╡р╣И 20: р╕Вр╕нр╣Гр╕лр╣Йр╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╕Бр╕ер╕▒р╕Ър╕ар╕▓р╕вр╕лр╕ер╕▒р╕Зр╕Др╕гр╕▒р╕Ъ</label><br/>
<button onclick="startRecording(20)">р╣Ар╕гр╕┤р╣Ир╕бр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<button onclick="stopRecording(20)">р╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Фр╣Ар╕кр╕╡р╕вр╕З</button>
<a id="downloadLink20" style="display:none;">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ъ</a>
</div>

<button id="downloadAllBtn">ЁЯУе р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Ар╕кр╕╡р╕вр╕Зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (ZIP)</button>
<hr>
<h2>р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ьр╕╣р╣Йр╕кр╕нр╕Щ: р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╣Др╕Яр╕ер╣Мр╣Ар╕кр╕╡р╕вр╕Зр╕Чр╕╡р╣Ир╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Ф</h2>
<ul id="fileList"></ul>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script type="module">
    // р╕Щр╕│р╣Ар╕Вр╣Йр╕▓ Firebase SDK р╕Ир╕▓р╕Б Google CDN р╣Вр╕Фр╕вр╕Хр╕гр╕З
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getStorage, ref, uploadBytes, listAll, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-storage.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

    // р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Бр╕│р╕лр╕Щр╕Фр╕Др╣Ир╕▓р╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М Firebase р╕Вр╕нр╕Зр╕Др╕╕р╕У
    const firebaseConfig = {
        apiKey: "AIzaSyA4OrZERUoxWPiShCEWVvz1MK9cYGO3_K8",
        authDomain: "new-record-3ccd6.firebaseapp.com",
        projectId: "new-record-3ccd6",
        storageBucket: "new-record-3ccd6.appspot.com",
        messagingSenderId: "1065863160189",
        appId: "1:1065863160189:web:25313e55b0733f5e126c14",
        measurementId: "G-JW6N2HYR58"
    };

    // р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ Firebase
    const app = initializeApp(firebaseConfig);
    const storage = getStorage(app);
    const db = getFirestore(app);

    let recorders = [];
    let audioChunksList = [];
    const fileListElement = document.getElementById('fileList');

    window.startRecording = async function(index) {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            const recorder = new MediaRecorder(stream);
            const audioChunks = [];
            recorder.ondataavailable = e => audioChunks.push(e.data);
            recorder.start();
            recorders[index] = recorder;
            audioChunksList[index] = audioChunks;
        } catch (error) {
            console.error("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕бр╣Вр╕Др╕гр╣Вр╕Яр╕Щр╣Др╕Фр╣Й:", error);
            alert("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕бр╣Вр╕Др╕гр╣Вр╕Яр╕Щр╣Др╕Фр╣Й р╣Вр╕Ыр╕гр╕Фр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ");
        }
    };

    window.stopRecording = function(index) {
        const recorder = recorders[index];
        const audioChunks = audioChunksList[index];
        if (!recorder) return;
        
        recorder.stop();
        recorder.onstop = async () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
            const username = document.getElementById("username").value || "anonymous";
            const audioFileName = `${username}_answer_${index}.webm`;
            const storageRef = ref(storage, 'answers/' + audioFileName);

            try {
                // р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Ар╕кр╕╡р╕вр╕Зр╣Др╕Ыр╕Чр╕╡р╣И Firebase Storage
                await uploadBytes(storageRef, audioBlob);
                console.log("р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣Мр╣Ар╕кр╕╡р╕вр╕Зр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з!");

                // р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕ер╕Зр╣Гр╕Щ Firestore
                await addDoc(collection(db, "recordings"), {
                    fileName: audioFileName,
                    username: username,
                    questionIndex: index,
                    timestamp: new Date().toISOString(),
                    storagePath: storageRef.fullPath
                });
                console.log("р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕З Firestore р╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з!");

                // р╕кр╕гр╣Йр╕▓р╕Зр╕ер╕┤р╕Зр╕Бр╣Мр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з
                const audioUrl = URL.createObjectURL(audioBlob);
                const downloadLink = document.getElementById('downloadLink' + index);
                downloadLink.href = audioUrl;
                downloadLink.download = audioFileName;
                downloadLink.style.display = 'block';
                downloadLink.textContent = 'р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕╡р╕вр╕Зр╕Др╕│р╕Хр╕нр╕Ър╕Чр╕╡р╣И ' + index;

                // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Ър╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ъ
                fetchAndDisplayFiles();

            } catch (error) {
                console.error("р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╣Гр╕Щр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕лр╕гр╕╖р╕нр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е:", error);
                alert("р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф: " + error.message);
            }
        };
    };

    // р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Др╕Яр╕ер╣Мр╕Ир╕▓р╕Б Firebase Storage
    async function fetchAndDisplayFiles() {
        fileListElement.innerHTML = '';
        try {
            const listRef = ref(storage, 'answers/');
            const res = await listAll(listRef);
            const items = res.items;

            if (items.length === 0) {
                fileListElement.innerHTML = '<li>р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╣Др╕Яр╕ер╣Мр╣Ар╕кр╕╡р╕вр╕Зр╕Чр╕╡р╣Ир╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Ф</li>';
                return;
            }

            items.forEach(async (itemRef) => {
                const url = await getDownloadURL(itemRef);
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = url;
                a.textContent = itemRef.name;
                a.target = "_blank";
                li.appendChild(a);
                fileListElement.appendChild(li);
            });
        } catch (error) {
            console.error("р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╣Гр╕Щр╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╣Др╕Яр╕ер╣М:", error);
        }
    }
    
    // р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Др╕Яр╕ер╣Мр╣Ар╕бр╕╖р╣Ир╕нр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Вр╕лр╕ер╕Фр╣Ар╕кр╕гр╣Зр╕И
    fetchAndDisplayFiles();

    document.getElementById("downloadAllBtn").onclick = async () => {
        const zip = new JSZip();
        const username = document.getElementById("username").value || "anonymous";

        try {
            const listRef = ref(storage, 'answers/');
            const res = await listAll(listRef);

            for (const itemRef of res.items) {
                const url = await getDownloadURL(itemRef);
                const response = await fetch(url);
                const blob = await response.blob();
                zip.file(itemRef.name, blob);
            }
            
            const content = await zip.generateAsync({ type: "blob" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(content);
            a.download = username + "_voice_answers.zip";
            a.click();
        } catch (error) {
            console.error("р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╣Гр╕Щр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М ZIP:", error);
            alert("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М ZIP р╣Др╕Фр╣Й р╣Вр╕Ыр╕гр╕Фр╕ер╕нр╕Зр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З");
        }
    };
</script>

</body>
</html>


